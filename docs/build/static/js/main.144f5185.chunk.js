(this["webpackJsonpstocks-view"]=this["webpackJsonpstocks-view"]||[]).push([[0],{146:function(e,t,n){e.exports=n(337)},151:function(e,t,n){},153:function(e,t,n){},218:function(e,t,n){},235:function(e,t,n){},245:function(e,t,n){},336:function(e,t,n){},337:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(11),s=n.n(c),o=(n(151),n(14)),i=n.n(o),u=n(29),l=n(50),d=n(343),f=n(129);n(153);function p(e){return a.a.createElement(d.b,{className:"stocks-list",loading:!e.stocks,dataSource:e.stocks||[],renderItem:function(t){return a.a.createElement(d.b.Item,{onClick:function(){return function(t){var n;null===(n=e.onSelect)||void 0===n||n.call(e,t)}(t)},className:"item",key:t.symbol.isin},a.a.createElement(d.b.Item.Meta,{avatar:a.a.createElement(f.a,{src:"https://static.tinkoff.ru/brands/traiding/".concat(t.symbol.isin,"x160.png")}),title:t.symbol.showName,description:t.symbol.ticker}),a.a.createElement("div",null,t.price.value," ",t.price.currency))}})}n(218);var m,b=n(12),v=n(130),k=n(131),h=n(132),y=n.n(h),w=n(344),O=n(339);!function(e){e.GetStocks="stocks/list",e.GetStock="stocks/get",e.GetCandles="symbols/candles"}(m||(m={}));var E=function(){function e(){Object(v.a)(this,e),this.client=void 0,this.client=y.a.create({baseURL:"https://api.tinkoff.ru/trading"})}return Object(k.a)(e,[{key:"getStocks",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestMethod(m.GetStocks,{tickers:t,country:"All",orderType:"Desc",sortType:"ByPrice"});case 2:return n=e.sent,e.abrupt("return",n.values);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStock",value:function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.requestMethod(m.GetStock,{ticker:t}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCandles",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date,r=Object(w.a)(n,1),e.next=4,this.requestMethod(m.GetCandles,{from:Object(O.a)(r),to:Object(O.a)(n),resolution:5,ticker:t});case 4:return a=e.sent,e.abrupt("return",a.candles);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestMethod",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.post(t,n);case 2:if(r=e.sent,!("code"in(a=r.data.payload))||!("message"in a)){e.next=6;break}throw new Error(a.message);case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),g=n(341);n(235);function j(e){var t=a.a.createElement("div",{className:"title-skeleton"});return a.a.createElement("div",{className:"main-layout"},a.a.createElement(g.a,{className:"header",onBack:e.onBack,title:e.title||t,subTitle:e.subtitle}),a.a.createElement("div",{className:"body"},e.children))}var x=new E;function S(){var e=Object(b.f)(),t=Object(r.useState)(),n=Object(l.a)(t,2),c=n[0],s=n[1];Object(r.useEffect)((function(){(function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=s,e.next=4,x.getStocks(["GOOGL","MSFT","AAPL"]);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),console.warn(e.t2.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]);return a.a.createElement(j,{title:"Stocks view"},a.a.createElement("div",{className:"main-view"},a.a.createElement(p,{stocks:c,onSelect:function(t){e.push("/stock-details/".concat(t.symbol.ticker))}})))}var C=n(62),B=(n(245),n(139)),N=n(342),M=n(340),G=new E;function H(){var e=Object(b.f)(),t=Object(b.g)(),n=Object(r.useRef)(),c=Object(r.useState)(),s=Object(l.a)(c,2),o=s[0],d=s[1],f=Object(r.useState)(),p=Object(l.a)(f,2),m=p[0],v=p[1];Object(r.useEffect)((function(){n.current=t.ticker})),Object(r.useEffect)((function(){(function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.current){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.t0=d,e.next=7,G.getStock(t);case 7:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=v,e.next=12,G.getCandles(t);case 12:e.t3=e.sent,(0,e.t2)(e.t3),e.next=19;break;case 16:e.prev=16,e.t4=e.catch(3),console.warn(e.t4.message);case 19:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(){return e.apply(this,arguments)}})()()}),[n]);var k=a.a.createElement("div",{className:"chart-container"},a.a.createElement(B.a,{data:{labels:(null===m||void 0===m?void 0:m.map((function(e){return Object(N.a)(Object(M.a)(e.date),"HH:mm MM/dd")})))||[],datasets:[{label:"Candles",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:(null===m||void 0===m?void 0:m.map((function(e){return e.c})))||[]}]},options:{scales:{yAxes:[{ticks:{display:!1}}]}},width:4e3,height:400}));return a.a.createElement(j,{title:null===o||void 0===o?void 0:o.symbol.showName,subtitle:null===o||void 0===o?void 0:o.symbol.ticker,onBack:function(){return e.goBack()}},a.a.createElement("div",{className:"stock-details-view"},m&&k))}function R(){return a.a.createElement(C.a,null,a.a.createElement("div",{className:"stocks-view-app"},a.a.createElement(b.c,null,a.a.createElement(b.a,{exact:!0,path:"/",component:S}),a.a.createElement(b.a,{path:"/stock-details/:ticker",component:H}))))}n(335),n(336);s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(R,null)),document.getElementById("root"))}},[[146,1,2]]]);
//# sourceMappingURL=main.144f5185.chunk.js.map