(this["webpackJsonpstocks-view"]=this["webpackJsonpstocks-view"]||[]).push([[0],{104:function(e,t,n){e.exports=n(209)},109:function(e,t,n){},111:function(e,t,n){},180:function(e,t,n){},197:function(e,t,n){},207:function(e,t,n){},209:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(6),s=n.n(c),i=(n(109),n(13)),o=n.n(i),u=n(27),l=n(46),f=n(212),p=n(90);n(111);function m(e){return a.a.createElement(f.b,{className:"stocks-list",loading:!e.stocks,dataSource:e.stocks||[],renderItem:function(t){return a.a.createElement(f.b.Item,{onClick:function(){return function(t){var n;null===(n=e.onSelect)||void 0===n||n.call(e,t)}(t)},className:"item",key:t.symbol.isin},a.a.createElement(f.b.Item.Meta,{avatar:a.a.createElement(p.a,{src:"https://static.tinkoff.ru/brands/traiding/".concat(t.symbol.isin,"x160.png")}),title:t.symbol.showName,description:t.symbol.ticker}),a.a.createElement("div",null,t.price.value," ",t.price.currency))}})}n(180);var k,v=n(7),b=n(91),d=n(92),h=n(93),w=n.n(h);!function(e){e.StocksList="stocks/list",e.StocksGet="stocks/get"}(k||(k={}));var y=function(){function e(){Object(b.a)(this,e),this.client=void 0,this.client=w.a.create({baseURL:"https://api.tinkoff.ru/trading"})}return Object(d.a)(e,[{key:"getStocks",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestMethod(k.StocksList,{tickers:t,country:"All",orderType:"Desc",sortType:"ByPrice"});case 2:return n=e.sent,e.abrupt("return",n.values);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStock",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.requestMethod(k.StocksGet,{ticker:t}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestMethod",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.post(t,n);case 2:if(r=e.sent,!("code"in(a=r.data.payload))||!("message"in a)){e.next=6;break}throw new Error(a.message);case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),E=n(211);n(197);function O(e){return a.a.createElement("div",{className:"main-layout"},a.a.createElement(E.a,{className:"header",onBack:e.onBack,title:e.title,subTitle:e.subtitle}),a.a.createElement("div",{className:"body"},e.children))}var j=new y;function S(){var e=Object(v.f)(),t=Object(r.useState)(),n=Object(l.a)(t,2),c=n[0],s=n[1];Object(r.useEffect)((function(){(function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=s,e.next=4,j.getStocks(["GOOGL","MSFT","AAPL"]);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),console.warn(e.t2.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]);return a.a.createElement(O,{title:"Stocks view"},a.a.createElement("div",{className:"main-view"},a.a.createElement(m,{stocks:c,onSelect:function(t){e.push("/stock-details/".concat(t.symbol.ticker))}})))}var g=n(42),x=(n(207),new y);function N(){var e=Object(v.f)(),t=Object(v.g)(),n=Object(r.useRef)(),c=Object(r.useState)(),s=Object(l.a)(c,2),i=s[0],f=s[1];return Object(r.useEffect)((function(){n.current=t.ticker})),Object(r.useEffect)((function(){(function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.current){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.t0=f,e.next=7,x.getStock(t);case 7:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 11:e.prev=11,e.t2=e.catch(3),console.warn(e.t2.message);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}})()()}),[n]),a.a.createElement(O,{title:(null===i||void 0===i?void 0:i.symbol.showName)||"Stock",subtitle:null===i||void 0===i?void 0:i.symbol.ticker,onBack:function(){return e.goBack()}},a.a.createElement("div",{className:"stock-details-view"},JSON.stringify(i)))}function B(){return a.a.createElement(g.a,null,a.a.createElement("div",{className:"stocks-view-app"},a.a.createElement(v.c,null,a.a.createElement(v.a,{exact:!0,path:"/",component:S}),a.a.createElement(v.a,{path:"/stock-details/:ticker",component:N}))))}n(208);s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(B,null)),document.getElementById("root"))}},[[104,1,2]]]);
//# sourceMappingURL=main.b43f2588.chunk.js.map